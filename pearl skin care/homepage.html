<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Homepage</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
  <style>
    html {
      scroll-behavior: smooth;
    }

     #skinTip {
    transition: opacity 0.5s ease;
  }
  </style>
</head>

<body class="bg-white text-gray-800">

  <!-- Navbar -->
  <header id="mainHeader"
    class="fixed top-0 left-0 w-full bg-pink-100 shadow-md p-4 flex justify-between items-center flex flex-wrap items-center gap-4 text-sm font-medium md:mt-0 md:gap-6 z-50">
    <h1 class="text-2xl font-bold">Pearl Skin Care</h1>
    <nav class="space-x-6 text-sm font-medium">
      <a href="cart.html" class="relative inline-block">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline text-pink-500" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.35 2.7a1 1 0 001.85.9L7 13zm0 0H5m14 0v6a1 1 0 001 1h1a1 1 0 001-1v-6M7 19a2 2 0 104 0 2 2 0 00-4 0zm10 0a2 2 0 104 0 2 2 0 00-4 0z" />
        </svg>
        <span id="cartCount"
          class="absolute -top-2 -right-2 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">0</span>
      </a>

      <a href="#" id="home" class="hover:text-pink-500"><i class="fa fa-home"></i> Home</a>
      <a href="products.html" id="shop" class="hover:text-pink-500"><i class="fa fa-shop"></i> Shop</a>
      <a href="#categories" class="hover:text-pink-500"><i class="fa fa-layer-group"></i> Categories</a>
      <div class="relative group inline-block">
        <button class="hover:text-pink-500"><i class="fa fa-phone"></i> Contact <i
            class="fas fa-chevron-down text-xs mt-[2px] text-pink-500"></i></button>
        <div class="absolute hidden group-hover:block bg-white shadow rounded mt-1 z-50 min-w-[150px] text-center">
          <a href="customer-dashboard.html" class="hover:text-pink-600">👤 Dashboard</a>
          <a href="#contact" class="block px-4 py-2 text-sm text-gray-700 hover:bg-pink-100"> <i
              class="fas fa-envelope-open-text text-pink-500"></i> Contact Form</a>
          <a href="mailto:victoradeyimika0@gmail.com" class="block px-4 py-2 text-sm text-gray-700 hover:bg-pink-100"><i
              class="fas fa-envelope text-pink-500"></i> Email
            Us</a>
          <a href="https://wa.me/2349053380773" target="_blank"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-pink-100"><i
              class="fab fa-whatsapp text-green-500"></i> WhatsApp</a>
          <a href="https://instagram.com/yourhandle" target="_blank"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-pink-100"><i
              class="fab fa-instagram text-pink-600"></i> Instagram</a>
        </div>
      </div>

      <span id="welcomeText" class="text-sm text-gray-700 hidden"></span>
      <button id="loginBtn" onclick="loginFromHomepage()"
        class="text-pink-600 hover:underline ml-2 text-sm">Login</button>
      <button id="logoutBtn" class="text-pink-600 hover:underline ml-2 text-sm hidden">Logout</button>
      <!-- Login Modal -->
      <div id="loginModal" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg w-full max-w-sm relative shadow">
          <button onclick="closeLoginModal()"
            class="absolute top-2 right-3 text-gray-500 text-xl hover:text-red-600">×</button>
          <h3 class="text-lg font-bold text-pink-600 mb-4">Login to your Account</h3>

          <input id="loginEmail" type="email" placeholder="Email" class="w-full mb-3 px-4 py-2 border rounded" />
          <input id="loginPassword" type="password" placeholder="Password"
            class="w-full mb-4 px-4 py-2 border rounded" />

          <button onclick="loginFromHomepage()"
            class="w-full bg-pink-600 text-white py-2 rounded hover:bg-pink-700">Login</button>

          <p class="text-sm mt-4 text-center">Don't have an account?
            <button onclick="openSignupModal()" class="text-pink-600 underline hover:text-pink-800">Sign up</button>
          </p>
        </div>
      </div>
      <!-- Signup Modal -->
      <div id="signupModal" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg w-full max-w-sm relative shadow">
          <button onclick="closeSignupModal()"
            class="absolute top-2 right-3 text-gray-500 text-xl hover:text-red-600">×</button>
          <h3 class="text-lg font-bold text-pink-600 mb-4">Create an Account</h3>

          <input id="signupName" type="text" placeholder="Full Name" class="w-full mb-3 px-4 py-2 border rounded" />
          <input id="signupEmail" type="email" placeholder="Email" class="w-full mb-3 px-4 py-2 border rounded" />
          <input id="signupPassword" type="password" placeholder="Password"
            class="w-full mb-4 px-4 py-2 border rounded" />

          <button onclick="signupFromHomepage()"
            class="w-full bg-pink-600 text-white py-2 rounded hover:bg-pink-700">Sign Up</button>

          <p class="text-sm mt-4 text-center">Already have an account?
            <button onclick="switchToLogin()" class="text-pink-600 underline hover:text-pink-800">Login</button>
          </p>
        </div>
      </div>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="relative bg-pink-50 text-center overflow-hidden h-80 mt-20">
    <div id="slider" class="flex w-[500%] transition-all duration-700">
      <img src="https://nuffoodsspectrum.in/wp-content/uploads/2022/11/1-11.jpeg" alt="1"
        class="w-full h-80 object-cover object-cover rounded-xl">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSWLq7VQPhLyGKSP-KBw7DlBJhvGcAP0kYNcg&s" alt="2"
        class="w-full h-80 object-cover ">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSLgV5Eg7VAlsdZ6vf-NU47HfWHIjqtlfLENQ&s" alt="3"
        class="w-full h-80 object-cover ">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQHmlStV9pcR8H3-REwG9RDh3nIMYOmgaGvWw&s" alt="4"
        class="w-full h-80 object-cover ">
      <img
        src="https://content.jdmagicbox.com/comp/def_content/nutritional-supplement-manufacturers/071412a218-nutritional-supplement-manufacturers-2-iow23.jpg"
        alt="5" class="w-full h-80 object-cover ">
    </div>
    <div class="absolute top-0 left-0 w-full h-full bg-black/30 flex items-center justify-center">
      <h2 class="text-white text-4xl font-bold">Nourish Your Skin Naturally</h2>
    </div>
  </section>

  <!-- Featured Products -->
  <section class="p-6">
    <h2 class="text-2xl font-semibold mb-4">Featured Products</h2>
    <div id="product-list" class="grid grid-cols-2 md:grid-cols-4 gap-4 ">

    </div>
  </section>

  <!-- Product Detail Modal -->
  <div id="productModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white w-11/12 max-w-md p-6 rounded shadow-lg relative">
      <button onclick="closeModal()" class="absolute top-2 right-2 text-gray-500 hover:text-red-600 text-xl">×</button>
      <h2 id="modalProductName" class="text-xl font-bold mb-2"></h2>
      <img id="modalProductImage" class="w-full h-48 object-cover rounded mb-2" />
      <p id="modalProductPrice" class="text-pink-600 font-semibold text-lg mb-1"></p>
      <p id="modalProductDescription" class="text-sm text-gray-700 mb-4"></p>
      <button id="modalAddToCartBtn" class="bg-pink-600 text-white px-4 py-2 rounded hover:bg-pink-700 w-full">Add to
        Cart</button>
    </div>
  </div>

  <!-- Promo Section -->
  <section class="bg-pink-50 p-6 my-6 rounded-xl text-center">
  <h3 class="text-2xl font-semibold mb-4">💡 Skin Tips</h3>
  <p id="skinTip" class="text-lg text-gray-700 font-medium">Loading tip...</p>
</section>


  <!-- Categories -->
  <section id="categories" class="p-6">
    <h3 class="text-2xl font-semibold mb-4">Browse by Category</h3>
    <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
      <button onclick="filterProducts('All')" data-category="All"
        class="category-btn bg-pink-100 p-4 rounded-xl text-center hover:bg-pink-200 cursor-pointer">
        💧<br />All
      </button>
      <button onclick="filterProducts('Brightening')" data-category="Brightening"
        class="category-btn bg-pink-100 p-4 rounded-xl text-center hover:bg-pink-200 cursor-pointer">
        ✨<br />Brightening
      </button>
      <button onclick="filterProducts('Anti-Aging')" data-category="Anti-Aging"
        class="category-btn bg-pink-100 p-4 rounded-xl text-center hover:bg-pink-200 cursor-pointer">
        🔄<br />Anti-Aging
      </button>
      <button onclick="filterProducts('Hydration')" data-category="Hydration"
        class="category-btn bg-pink-100 p-4 rounded-xl text-center hover:bg-pink-200 cursor-pointer">
        💧<br />Hydration
      </button>
      <button onclick="filterProducts('Supplements')" data-category="Supplements"
        class="category-btn bg-pink-100 p-4 rounded-xl text-center hover:bg-pink-200 cursor-pointer">
        💊<br />Supplements
      </button>
  </section>

  <script>
    let index = 0;
    let selectedCategory = "All";
    const sections = document.querySelectorAll("section[id]");
    const navLinks = document.querySelectorAll(".nav-link");

    const skinTips = [
  "💧 Stay hydrated — drink at least 8 glasses of water daily.",
  "🧴 Apply sunscreen every morning, even on cloudy days.",
  "🥗 Eat a balanced diet with vitamins for skin health.",
  "😴 Sleep at least 7–8 hours to allow skin repair.",
  "🧼 Wash your face twice daily with a gentle cleanser.",
  "🍃 Use natural products when possible to avoid irritation."
];

let tipIndex = 0;

function rotateTips() {
  const tipElement = document.getElementById("skinTip");
  tipElement.textContent = skinTips[tipIndex];
  tipIndex = (tipIndex + 1) % skinTips.length;
}

document.addEventListener("DOMContentLoaded", () => {
  rotateTips();
  setInterval(rotateTips, 5000);
});

function rotateTips() {
  const tipElement = document.getElementById("skinTip");
  tipElement.style.opacity = 0;
  setTimeout(() => {
    tipElement.textContent = skinTips[tipIndex];
    tipElement.style.opacity = 1;
    tipIndex = (tipIndex + 1) % skinTips.length;
  }, 300);
}


    function slideImages() {
      index = (index + 1) % 5;
      document.getElementById("slider").style.marginLeft = `-${index * 100}%`;
    }

    if (!localStorage.getItem("products")) {
      const sampleProducts = [];
      localStorage.setItem("products", JSON.stringify(sampleProducts));
    }

    function filterProducts(category) {
      const productList = document.getElementById("product-list");
      const allProducts = JSON.parse(localStorage.getItem("products")) || [];
      document.getElementById("product-list")?.scrollIntoView({ behavior: "smooth" });
      localStorage.setItem("lastCategory", category);

      selectedCategory = category;
      document.querySelectorAll(".category-btn").forEach(btn => {
        if (btn.dataset.category === category) {
          btn.classList.add("bg-pink-500", "text-white");
          btn.classList.remove("bg-pink-100", "text-gray-800");
        } else {
          btn.classList.remove("bg-pink-500", "text-white");
          btn.classList.add("bg-pink-100", "text-gray-800");
        }
      });

      const filtered = category === "All"
        ? allProducts
        : allProducts.filter(product => product.category === category);

      if (productList) {
        productList.innerHTML = "";
        filtered.forEach((product, index) => {
          productList.innerHTML += `
    <div class="border rounded-xl p-4 text-center shadow">
      <img src="${product.image}" class="mx-auto mb-2 h-32 object-cover rounded" />
      <h4 class="font-semibold">${product.name}</h4>
      <p class="text-pink-500 font-bold">₦${product.price.toLocaleString()}</p>
      <div class="mt-2 space-x-2">
        <button onclick="viewProduct(${index})" class="text-sm px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600">View</button>
        <button onclick="addToCart(${index})" class="text-sm px-3 py-1 bg-pink-600 text-white rounded hover:bg-pink-700">Add to Cart</button>
      </div>
    </div>
  `;
        });
      }
    }

    let currentProducts = [];

    function viewProduct(index) {
      const products = JSON.parse(localStorage.getItem("products")) || [];
      currentProducts = products;
      const product = products[index];

      document.getElementById("modalProductName").textContent = product.name;
      document.getElementById("modalProductImage").src = product.image;
      document.getElementById("modalProductPrice").textContent = `₦${product.price.toLocaleString()}`;
      document.getElementById("modalProductDescription").textContent = product.description;
      document.getElementById("modalAddToCartBtn").onclick = () => addToCart(index);

      const modal = document.getElementById("productModal");
      modal.classList.remove("hidden");
      modal.classList.add("flex");
    }

    function closeModal() {
      document.getElementById("productModal").classList.add("hidden");
    }

    function addToCart(index) {
      const products = currentProducts.length ? currentProducts : JSON.parse(localStorage.getItem("products")) || [];
      const product = products[index];
      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      const existing = cart.find(item => item.name === product.name);
      if (existing) {
        existing.quantity += 1;
      } else {
        cart.push({ ...product, quantity: 1 });
      }

      localStorage.setItem("cart", JSON.stringify(cart));
      console.log(`${product.name} added to cart.`);
      updateCartCount();
    }

    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      const count = cart.reduce((total, item) => total + item.quantity, 0);
      const cartCount = document.getElementById("cartCount");
      if (cartCount) {
        cartCount.textContent = count;
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      const user = JSON.parse(localStorage.getItem("currentUser"));
      const welcome = document.getElementById("welcomeText");
      const logoutBtn = document.getElementById("logoutBtn");

      if (user && welcome) {
        welcome.textContent = `Hi, ${user.name}`;
      }

      if (logoutBtn) {
        logoutBtn.addEventListener("click", () => {
          localStorage.removeItem("currentUser");
          window.location.href = "login.html";
        });
      }

      filterProducts("All");
      setInterval(slideImages, 3000);
      updateCartCount();
    });

    window.addEventListener("scroll", () => {
      const header = document.getElementById("mainHeader");
      if (window.scrollY > 50) {
        header.classList.add("bg-pink-100", "shadow-md");
        header.classList.remove("bg-transparent");
      } else {
        header.classList.remove("bg-pink-100", "shadow-md");
        header.classList.add("bg-transparent");
      }
    });

    function activateNavLink() {
      let scrollY = window.pageYOffset;

      sections.forEach(section => {
        const sectionTop = section.offsetTop - 80;
        const sectionHeight = section.offsetHeight;
        const sectionId = section.getAttribute("id");

        if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
          navLinks.forEach(link => {
            link.classList.remove("text-pink-600", "font-semibold");
            if (link.getAttribute("href") === `#${sectionId}`) {
              link.classList.add("text-pink-600", "font-semibold");
            }
          });
        }
      });
    }

    function loginFromHomepage() {
      const email = document.getElementById("loginEmail").value.trim();
      const password = document.getElementById("loginPassword").value;

      if (!email || !password) {
        console.log("Please fill in all fields.");
        return;
      }

      const users = JSON.parse(localStorage.getItem("users")) || [];
      const user = users.find(u => u.email === email && u.password === password);

      if (!user) {
        alert("Invalid email or password.");
        return;
      }

      localStorage.setItem("currentUser", JSON.stringify(user));
      closeLoginModal();
      updateLoginState();
      alert("Login successful!");
    }

    function closeLoginModal() {
      document.getElementById("loginModal").classList.add("hidden");
    }

    function updateLoginState() {
      const user = JSON.parse(localStorage.getItem("currentUser"));
      const welcome = document.getElementById("welcomeText");
      const loginBtn = document.getElementById("loginBtn");
      const logoutBtn = document.getElementById("logoutBtn");

      if (user) {
        welcome.textContent = `Hi, ${user.name}`;
        welcome.classList.remove("hidden");
        loginBtn.classList.add("hidden");
        logoutBtn.classList.remove("hidden");
      } else {
        welcome.textContent = "";
        welcome.classList.add("hidden");
        loginBtn.classList.remove("hidden");
        logoutBtn.classList.add("hidden");
      }
    }

    document.getElementById("loginBtn").addEventListener("click", () => {
      document.getElementById("loginModal").classList.remove("hidden");
      document.getElementById("loginModal").classList.add("flex");
    });

    document.addEventListener("DOMContentLoaded", () => {
      updateLoginState();

      filterProducts("All");
      setInterval(slideImages, 3000);
      updateCartCount();

      const logoutBtn = document.getElementById("logoutBtn");
      if (logoutBtn) {
        logoutBtn.addEventListener("click", () => {
          localStorage.removeItem("currentUser");
          updateLoginState();
          alert("Logged out successfully.");
        });
      }

      document.getElementById("loginBtn").addEventListener("click", () => {
        document.getElementById("loginModal").classList.remove("hidden");
        document.getElementById("loginModal").classList.add("flex");
      });
    });

    window.addEventListener("scroll", activateNavLink);
    updateCartCount();
  </script>
</body>
</html>